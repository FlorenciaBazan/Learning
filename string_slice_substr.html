<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>String | slice() and substring()</title>
  <script>

    function invalidString(string) {
      var invalid = "áéíóúÁÉÍÓÚÑñ ()<>,;:[]%&";
      var flag = false;
      for(i=0; i < invalid.length; i++) {
        var c = invalid.charAt(i);
        if(string.indexOf(c)!=-1) {
          flag = true;
          break;
        }
      }
      return flag;
    }
    var email1 = "pacoarce@gmail.com.mx";
    var email2 = "pacoárce@gmail.com.mx";
    //pacoArce@gmail.com.mx
    //012345678
    var pos = email2.indexOf("@");
    console.log(pos);
    var dot = email2.indexOf(".", pos);
    console.log(dot);
    //first validation
    if(email1.length<10){
      document.write("the password is very short<br>");
    } else if (pos == -1){
      document.write("the mail does not have the arroba");
    } else if (dot ==-1){
      document.write("email must have at least one dot");
    } else if (invalidString(email2)){
      document.write("email have invalid characters");
    } else if(!email1.toUpperCase() == email2.toLocaleUpperCase()) {
      document.write("the keys do NOT match<br>");
    } else {
      service = email2.slice(pos+1).toLocaleLowerCase();
      user = email2.substr(0,pos).toLocaleLowerCase();
      document.write("your email service is: <b>"+service+"</b><br>");
      document.write("your email user is: <b>"+user+"</b><br>");
      document.write("the keys match<br>");
    }

  </script>
</head>
 <body></body>
</html>
